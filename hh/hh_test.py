from datetime import date
import datetime
import pytest
import requests
from pydantic import HttpUrl

import hh
from .config import Config
# from models import CacheModel
from .schemas import (
    VacancyHHSchema,
    VacancySearchParamsHHSchema,
    AddressHHSchema,
    SalaryHHSchema,
    AreaHHSchema,
    ShortEmployerListHHSchema,
    EmployerHHSchema,
    ShortVacancyListHHSchema, KeySkillHHSchema, VacancyEmployerHHSchema, IdNameHHSchema, SpecializationHHSchema,
    MetroStationsHHSchema, PhoneHHSchema, ContactsHHSchema
)

conf = Config()
base_url = conf.base_url


@pytest.fixture
def hh_headers():
    return {
        "HH-User-Agent": "LISA HR/1.0 (admin@lisacorp.com)",
        "Authorization": "Bearer " + conf.token
    }


@pytest.fixture
def hh_config():
    return Config()


@pytest.fixture
def ddd():
    return [VacancyHHSchema(id='52882698', premium=False, has_test=False, response_url=None, address=AddressHHSchema(city='Чебоксары', street='микрорайон Волжский-3, Приволжский бульвар', building='4', description=None, lat=56.151978, lng=47.195643, metro_stations=[]), alternate_url='https://hh.ru/vacancy/52882698', apply_alternate_url='https://hh.ru/applicant/vacancy_response?vacancyId=52882698', department=None, salary=SalaryHHSchema(from_=40000, to_=100000, gross=True, currency='RUR'), name='JavaScript Разработчик', insider_interview=None, area=AreaHHSchema(id='107', name='Чебоксары', url=HttpUrl('https://api.hh.ru/areas/107', scheme='https', host='api.hh.ru', tld='ru', host_type='domain', port='443', path='/areas/107')), url=None, published_at=datetime.datetime(2022, 3, 12, 10, 26, 40, tzinfo=datetime.timezone(datetime.timedelta(seconds=10800))), relations=[], employer=VacancyEmployerHHSchema(blacklisted=None), response_letter_required=False, type=IdNameHHSchema(id='open', name='Открытая'), archived=False, working_days=[], working_time_intervals=[], working_time_modes=[], accept_temporary=True, sort_point_distance=None, counters=None, snippet=None, description='<p><strong>IT-компания Бокус</strong> - многопрофильная компания, специализирующаяся на разработке программных продуктов и ИТ-решений для частного бизнеса и государственных структур.</p> <p>Работа у нас — это участие в реализации сложных и интересных проектов, сплоченный коллектив, стабильная оплата труда. Наша компания развивается вместе с нашими сотрудниками. Присоединяйтесь к нашей команде!</p> <p>В связи с долгосрочными планами развития мы набираем <strong>JavaScript Программистов</strong>.<br/>Рассматриваем все уровни: <strong>Junior, Middle, Senior</strong>.</p> <p>Нам также интересны программисты обладающие знаниями других языков, например: php, kotlin, java, swift, c++, желающие применить свои знания в нативной и гибридной разработке.</p> <p><strong>Используемый стек:</strong></p> <ul> <li> <p>Node.JS + SQL (REST API, SOAP API, Socket)</p> </li> <li> <p>React Native / React.JS + Redux</p> </li> </ul> <p><strong>Требования:</strong></p> <ul> <li> <p>знание JavaScript, ES6</p> </li> <li> <p>понимание принципов ООП, MVC, SPA-приложений</p> </li> <li> <p>HTML5, CSS3, Flexbox</p> </li> <li> <p>Git</p> </li> </ul> <p><strong>Будет плюсом:</strong></p> <ul> <li> <p>Опыт работы с Agile. Знакомство с DevOps (TeamCity и т.п.)</p> </li> <li> <p>Опыт разработки на любом другом языке программирования</p> </li> <li> <p>Ссылка на работающие проекты или репозитории</p> </li> <li> <p>знание Фреймворков NestJS, Laravel</p> </li> </ul> <p><strong>Условия:</strong></p> <ul> <li> <p>Интересные проекты</p> </li> <li> <p>Отличный дружный коллектив профессионалов</p> </li> <li> <p>Обучение</p> </li> <li> <p>Оформление по ТК РФ</p> </li> <li> <p>График работы 5/2 с 9 до 18.</p> </li> <li> <p>ЗП 30 - 100 т.р., после собеседования</p> </li> </ul> <p><strong>Собеседование после рассмотрения резюме</strong></p>', branded_description=None, key_skills=[KeySkillHHSchema(name='ООП'), KeySkillHHSchema(name='JavaScript'), KeySkillHHSchema(name='Laravel'), KeySkillHHSchema(name='NestJS'), KeySkillHHSchema(name='SQL'), KeySkillHHSchema(name='jQuery'), KeySkillHHSchema(name='Bootstrap'), KeySkillHHSchema(name='PHP'), KeySkillHHSchema(name='PostgreSQL'), KeySkillHHSchema(name='Git'), KeySkillHHSchema(name='Node.js'), KeySkillHHSchema(name='REST'), KeySkillHHSchema(name='React.js'), KeySkillHHSchema(name='MySQL')], schedule=IdNameHHSchema(id='fullDay', name='Полный день'), accept_handicapped=False, accept_kids=False, experience=IdNameHHSchema(id='between1And3', name='От 1 года до 3 лет'), code=None, employment=IdNameHHSchema(id='full', name='Полная занятость'), created_at=datetime.datetime(2022, 3, 12, 10, 26, 40, tzinfo=datetime.timezone(datetime.timedelta(seconds=10800))), test=None, specializations=[SpecializationHHSchema(id='1.221', name='Программирование, Разработка', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.50', name='Системы управления предприятием (ERP)', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.82', name='Инженер', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.9', name='Web инженер', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.10', name='Web мастер', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком')], contacts=ContactsHHSchema(name='Иванов Дмитрий', email='hr@bokus.ru', phones=[PhoneHHSchema(country='7', city='927', number='6688664', comment=None)]), billing_type=IdNameHHSchema(id='standard_plus', name='Стандарт плюс'), allow_messages=True, driver_license_types=[], accept_incomplete_resumes=False, professional_roles=[IdNameHHSchema(id='96', name='Программист, разработчик')], suitable_resumes_url=None, negotiations_url=None, quick_responses_allowed=False, hidden=False, vacancy_constructor_template=None), VacancyHHSchema(id='53724478', premium=False, has_test=False, response_url=None, address=AddressHHSchema(city='Санкт-Петербург', street='Коломенская улица', building='3', description=None, lat=59.92626, lng=30.354936, metro_stations=[MetroStationsHHSchema(station_id='14.200', station_name='Владимирская', line_id='14', line_name='Кировско-Выборгская', lat=59.927628, lng=30.347898), MetroStationsHHSchema(station_id='17.238', station_name='Достоевская', line_id='17', line_name='Правобережная', lat=59.928234, lng=30.346029), MetroStationsHHSchema(station_id='16.230', station_name='Маяковская', line_id='16', line_name='Невско-Василеостровская', lat=59.931366, lng=30.354645), MetroStationsHHSchema(station_id='14.199', station_name='Площадь Восстания', line_id='14', line_name='Кировско-Выборгская', lat=59.930279, lng=30.361069)]), alternate_url='https://hh.ru/vacancy/53724478', apply_alternate_url='https://hh.ru/applicant/vacancy_response?vacancyId=53724478', department=None, salary=SalaryHHSchema(from_=30000, to_=None, gross=False, currency='RUR'), name='Node.js-разработчик/стажер', insider_interview=None, area=AreaHHSchema(id='2', name='Санкт-Петербург', url=HttpUrl('https://api.hh.ru/areas/2', scheme='https', host='api.hh.ru', tld='ru', host_type='domain', port='443', path='/areas/2')), url=None, published_at=datetime.datetime(2022, 3, 12, 7, 25, 48, tzinfo=datetime.timezone(datetime.timedelta(seconds=10800))), relations=[], employer=VacancyEmployerHHSchema(blacklisted=None), response_letter_required=False, type=IdNameHHSchema(id='open', name='Открытая'), archived=False, working_days=[], working_time_intervals=[], working_time_modes=[], accept_temporary=False, sort_point_distance=None, counters=None, snippet=None, description='<p>Ищем в команду начинающего, но талантливого Node.js-разработчика</p> <p><strong>Обязанности:</strong></p> <ul> <li>разработка Node.js + mongodb</li> <li>внедрение веб-интерфейсов на vue.js</li> </ul> <p><strong>Требования:</strong></p> <ul> <li><strong>резюме рассматриваются ТОЛЬКО С ПОРТФОЛИО</strong></li> <li>понимание принципов верстки</li> <li>желание учиться и повышать квалификацию (в том числе изучать профильную литературу)</li> </ul> <strong>Условия:</strong> <ul> <li>Обучение и работа на территории работодателя</li> <li>Рабочий день с 10 до 19 часов по будням (возможно трудоустройство на неполный рабочий день)</li> <li>Выплата заработной платы 2 раза в месяц - 10 и 25 числа месяца</li> <li>Чай, кофе, печеньки, колбаса, фрукты и т. п.</li> </ul>', branded_description=None, key_skills=[KeySkillHHSchema(name='HTML'), KeySkillHHSchema(name='CSS'), KeySkillHHSchema(name='JavaScript'), KeySkillHHSchema(name='Git'), KeySkillHHSchema(name='vue.js'), KeySkillHHSchema(name='Node.js')], schedule=IdNameHHSchema(id='fullDay', name='Полный день'), accept_handicapped=False, accept_kids=False, experience=IdNameHHSchema(id='noExperience', name='Нет опыта'), code='010', employment=IdNameHHSchema(id='probation', name='Стажировка'), created_at=datetime.datetime(2022, 3, 12, 7, 25, 48, tzinfo=datetime.timezone(datetime.timedelta(seconds=10800))), test=None, specializations=[SpecializationHHSchema(id='1.221', name='Программирование, Разработка', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.50', name='Системы управления предприятием (ERP)', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.82', name='Инженер', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.9', name='Web инженер', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.10', name='Web мастер', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком')], contacts=None, billing_type=IdNameHHSchema(id='standard', name='Стандарт'), allow_messages=True, driver_license_types=[], accept_incomplete_resumes=False, professional_roles=[IdNameHHSchema(id='96', name='Программист, разработчик')], suitable_resumes_url=None, negotiations_url=None, quick_responses_allowed=False, hidden=False, vacancy_constructor_template=None), VacancyHHSchema(id='52999705', premium=False, has_test=False, response_url=None, address=AddressHHSchema(city='Москва', street='Тверская улица', building='12с9', description=None, lat=55.763523, lng=37.609739, metro_stations=[]), alternate_url='https://hh.ru/vacancy/52999705', apply_alternate_url='https://hh.ru/applicant/vacancy_response?vacancyId=52999705', department=None, salary=SalaryHHSchema(from_=180000, to_=240000, gross=False, currency='RUR'), name='Node.js разработчик', insider_interview=None, area=AreaHHSchema(id='1', name='Москва', url=HttpUrl('https://api.hh.ru/areas/1', scheme='https', host='api.hh.ru', tld='ru', host_type='domain', port='443', path='/areas/1')), url=None, published_at=datetime.datetime(2022, 3, 11, 11, 13, 40, tzinfo=datetime.timezone(datetime.timedelta(seconds=10800))), relations=[], employer=VacancyEmployerHHSchema(blacklisted=None), response_letter_required=False, type=IdNameHHSchema(id='open', name='Открытая'), archived=False, working_days=[], working_time_intervals=[], working_time_modes=[], accept_temporary=True, sort_point_distance=None, counters=None, snippet=None, description='<p><strong>Приглашаем Node.js разработчиков в финтех-стартап.</strong></p> <p><strong>Проект создается на базе международного страхового брокера Challenge Group, который работает в 40 странах на 5 континентах, единственный в РФ брокер, аккредитованный в Lloyd’s of London. </strong></p> <p>Мы разрабатываем экосистему из набора продуктов для работы страховых агентов, которая подразумевает большое количество интеграций со страховыми компаниями и технологическими партнерами.</p> <p>Разработка ведется более полугода, значимая часть работы уже проделана для запуска первой продакшн-версии, есть реальные пользователи и продажи. В текущий момент расширяем команду для качественного рывка.</p> <p><strong>Требования:</strong></p> <ul> <li> <p>Опыт работы на Node.js</p> </li> <li> <p>Готовность разбираться в предметной области, вникать в бизнес-процессы, вести конструктивный диалог с командой и вносить свой вклад,</p> </li> <li> <p>Опыт работы с MongoDB (желательно),</p> </li> <li> <p>При частичной занятости-возможность работать не менее 20 часов в неделю.</p> </li> </ul> <p><strong>Задачи:</strong></p> <ul> <li> <p>Разработка бэкенда на Node.js. При желании можно делать backend + frontend и попрактиковаться на React.</p> </li> <li> <p>Делать большую веб-платформу + кроссплатформенное мобильное приложение (на Cordova), а также разные интеграции со сторонними API (DADATA, Автокод, страховые компании и т.д.)</p> </li> </ul> <p><strong>Используемый стек технологий:</strong></p> <ul> <li> <p>Вся разработка ведется на JS</p> </li> <li> <p>Бэкенд на Node.js (Total.js, Mongoose)</p> </li> <li> <p>Фронтенд на React (React Hook Form)</p> </li> <li> <p>Хранение данных в MongoDB</p> </li> </ul> <p><strong>Как организована работа:</strong></p> <ul> <li> <p>Трекинг задач и ведение документации - Jira, Confluence</p> </li> <li> <p>Работа ведется спринтами с элементами Scrum</p> </li> </ul> <p><strong>Условия работы:</strong></p> <ul> <li> <p>работа в финтех стартапе с сильной командой;</p> </li> <li> <p>интересные и сложные задачи, возможность напрямую влиять на результат и бизнес-процессы, полное отсутствие бюрократии, участие в создании инновационного продукта;</p> </li> <li> <p>полностью удаленная работа;</p> </li> <li> <p>У нас крутая команда, которая состоит из экспертов страхового бизнеса и разработчиков с опытом работы в Ситилинк, Туту.ру и других серьезных компаний;</p> </li> <li> <p>доход при полной занятости 180 000 – 240 000 net (готовы обсуждать по результатам испытательного срока).</p> </li> </ul>', branded_description=None, key_skills=[KeySkillHHSchema(name='MongoDB'), KeySkillHHSchema(name='Node.js'), KeySkillHHSchema(name='Atlassian Jira'), KeySkillHHSchema(name='React'), KeySkillHHSchema(name='JS'), KeySkillHHSchema(name='Atlassian Confluence')], schedule=IdNameHHSchema(id='remote', name='Удаленная работа'), accept_handicapped=False, accept_kids=False, experience=IdNameHHSchema(id='between3And6', name='От 3 до 6 лет'), code=None, employment=IdNameHHSchema(id='full', name='Полная занятость'), created_at=datetime.datetime(2022, 3, 11, 11, 13, 40, tzinfo=datetime.timezone(datetime.timedelta(seconds=10800))), test=None, specializations=[SpecializationHHSchema(id='1.221', name='Программирование, Разработка', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.50', name='Системы управления предприятием (ERP)', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.82', name='Инженер', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.9', name='Web инженер', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.10', name='Web мастер', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком')], contacts=None, billing_type=IdNameHHSchema(id='standard_plus', name='Стандарт плюс'), allow_messages=True, driver_license_types=[], accept_incomplete_resumes=False, professional_roles=[IdNameHHSchema(id='96', name='Программист, разработчик')], suitable_resumes_url=None, negotiations_url=None, quick_responses_allowed=False, hidden=False, vacancy_constructor_template=None), VacancyHHSchema(id='47307389', premium=False, has_test=False, response_url=None, address=AddressHHSchema(city='Новосибирск', street='улица Кутателадзе', building='4г', description=None, lat=54.857958, lng=83.105671, metro_stations=[]), alternate_url='https://hh.ru/vacancy/47307389', apply_alternate_url='https://hh.ru/applicant/vacancy_response?vacancyId=47307389', department=None, salary=SalaryHHSchema(from_=100000, to_=160000, gross=False, currency='RUR'), name='Middle FullStack (React, Node.js) developer', insider_interview=None, area=AreaHHSchema(id='4', name='Новосибирск', url=HttpUrl('https://api.hh.ru/areas/4', scheme='https', host='api.hh.ru', tld='ru', host_type='domain', port='443', path='/areas/4')), url=None, published_at=datetime.datetime(2022, 3, 12, 13, 3, 33, tzinfo=datetime.timezone(datetime.timedelta(seconds=10800))), relations=[], employer=VacancyEmployerHHSchema(blacklisted=None), response_letter_required=False, type=IdNameHHSchema(id='open', name='Открытая'), archived=False, working_days=[], working_time_intervals=[], working_time_modes=[], accept_temporary=False, sort_point_distance=None, counters=None, snippet=None, description='<p>«Технологика» расширяет команду! Открыт второй <strong>офис в центре Новосибирска</strong>, но также мы активно ищем сильных кандадитов и в <strong>других городах и регионах России</strong>.</p> <p>Наша компания – это большое количество интересных проектов в различных бизнес сферах и направлениях. Мы используем широкий спектр современных технологий и нам очень нужны <strong>талантливые, увлеченные разработчики</strong>.</p> <p><strong>Необходимые навыки и опыт:</strong></p> <ul> <li> <p>Опыт backend + frontend разработки от 2-х лет.</p> </li> <li> <p>Опыт front-end разработки (React, JavaScript/TypeScript). Уверенные знания HTML/CSS.</p> </li> <li> <p>Опыт backend разработки (Node.js, MySQL/PostgreSQL).</p> </li> <li> <p>Опыт работы с Docker.</p> </li> <li> <p>Опыт командной работы.</p> </li> </ul> <p><strong>Плюсом будут:</strong></p> <ul> <li> <p>Опыт работы с AWS/Azure/Google стэком.</p> </li> <li> <p>Знакомство с принципами работы AI.</p> </li> <li> <p>Английский язык на уровне Intermediate и выше.</p> </li> </ul> <p><strong>Вам предстоит:</strong></p> <ul> <li>Участие в проектировании и создании архитектуры.</li> <li>Разработка (frontend + backend).</li> <li>Взаимодействие со смежными командами (команды мобильной разработки).</li> </ul> <p><strong>Мы предлагаем:</strong></p> <ul> <li>гибкий график работы;</li> <li>возможность профессионального и карьерного роста;</li> <li>просторный офис и рабочая обстановка, способствующие спокойной, творческой работе;</li> <li>обучение и сертификация за счет Компании;</li> <li>четырехнедельный оплачиваемый отпуск, оплата больничных и другие гарантии согласно ТК РФ;</li> <li><strong>ДМС</strong> (медицинское обслуживание в лучших клиниках по всей России);</li> <li>частичная <strong>оплата занятий спортом</strong>;</li> <li>частичная <strong>оплата занятий английским;</strong></li> <li><strong>возможность удалённой работы.</strong></li> </ul>', branded_description=None, key_skills=[KeySkillHHSchema(name='JavaScript'), KeySkillHHSchema(name='Node.js'), KeySkillHHSchema(name='React'), KeySkillHHSchema(name='TypeScript'), KeySkillHHSchema(name='Английский язык')], schedule=IdNameHHSchema(id='flexible', name='Гибкий график'), accept_handicapped=False, accept_kids=False, experience=IdNameHHSchema(id='between1And3', name='От 1 года до 3 лет'), code=None, employment=IdNameHHSchema(id='full', name='Полная занятость'), created_at=datetime.datetime(2022, 3, 12, 13, 3, 33, tzinfo=datetime.timezone(datetime.timedelta(seconds=10800))), test=None, specializations=[SpecializationHHSchema(id='1.221', name='Программирование, Разработка', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком')], contacts=ContactsHHSchema(name='Качанова Татьяна', email='tkachanova@tehnologika.ru', phones=[PhoneHHSchema(country='7', city='903', number='0492077', comment=None)]), billing_type=IdNameHHSchema(id='standard', name='Стандарт'), allow_messages=True, driver_license_types=[], accept_incomplete_resumes=False, professional_roles=[IdNameHHSchema(id='96', name='Программист, разработчик')], suitable_resumes_url=None, negotiations_url=None, quick_responses_allowed=False, hidden=False, vacancy_constructor_template=None), VacancyHHSchema(id='53314544', premium=False, has_test=False, response_url=None, address=AddressHHSchema(city='Москва', street='Духовской переулок', building='17с11', description=None, lat=55.704524, lng=37.615371, metro_stations=[MetroStationsHHSchema(station_id='9.142', station_name='Тульская', line_id='9', line_name='Серпуховско-Тимирязевская', lat=55.70961, lng=37.622569)]), alternate_url='https://hh.ru/vacancy/53314544', apply_alternate_url='https://hh.ru/applicant/vacancy_response?vacancyId=53314544', department=None, salary=SalaryHHSchema(from_=None, to_=300000, gross=False, currency='RUR'), name='Frontend-разработчик (Vue.js)', insider_interview=None, area=AreaHHSchema(id='1', name='Москва', url=HttpUrl('https://api.hh.ru/areas/1', scheme='https', host='api.hh.ru', tld='ru', host_type='domain', port='443', path='/areas/1')), url=None, published_at=datetime.datetime(2022, 3, 12, 11, 31, 30, tzinfo=datetime.timezone(datetime.timedelta(seconds=10800))), relations=[], employer=VacancyEmployerHHSchema(blacklisted=None), response_letter_required=False, type=IdNameHHSchema(id='open', name='Открытая'), archived=False, working_days=[], working_time_intervals=[], working_time_modes=[], accept_temporary=False, sort_point_distance=None, counters=None, snippet=None, description='<p>Мы из <strong>Supster — </strong>мы помогаем бизнесу найти контакт со своей аудиторий. Supster - стартап, который уже нашел свой рынок и скоро будем называть себя громко <em>highLoad-проектом</em>. За нашими плечами стоит мощная IT-компания, мы не одиночки.</p> <p><strong>Мы ищем в команду </strong>коллегу-товарища, который поможет нам сделать наш продукт еще лучше и немного разбирается в этом чертовом <em>Java-script</em> ). Если ты не за бюрократию, а за результат и идею, то тебе к нам. Сейчас, это возможность начать продукт с нуля, применить все свои знания, построить его так как ты видишь. В будущем наш продукт станет показательным примером в твоей карьере.</p> <p><strong>Опыт, знания, навыки:</strong></p> <ul> <li> <p>опыт разработки от 3-x лет в коллективах с сформированным workflow разработки;</p> </li> <li> <p>язык программирования — Java-script/Type-script, ES6, уровень средний и выше, вопрос «чем отличается null от undefined» не вызывает у тебя проблем;</p> </li> <li> <p>Знание фреймворков React или Angular или Vue.js / Webpack;</p> </li> <li> <p>HTML5, CSS3 и SCSS. Опыт вёрстки, включая адаптивную, способность верстать сложные интерфейсы, работа со сборщиками, препроцессорами;</p> </li> <li> <p>опыт написания тестов;</p> </li> <li> <p>знание слов GIT, Jira, Java-script, Type-script, React, Angular, Vue.js, ECMAScript, ES6, Canban, SOLID;</p> </li> <li> <p>мы ждем от тебя дисциплинированности и ответственности за то что ты делаешь.</p> </li> </ul> <p><strong>Задачи:</strong></p> <p><em>Разработка Frontend CRM системы, а именно:</em></p> <ul> <li> <p>спроектируете новую архитектуру фронтенда;</p> </li> <li> <p>разработаете программные модули системы;</p> </li> <li> <p>соприкоснетесь с современной микросервисной архитектурой большого распределенного web-приложения;</p> </li> <li> <p>соприкоснетесь с нагрузкой до 100К RPS;</p> </li> <li> <p>будете работать с гео распределенным приложением;</p> </li> <li> <p>будете думать широко и нестандартно, считать с исключительной точностью, отвечая правильно на вопрос почему 8 - 6.4 &lt;&gt; 1.6 ;</p> </li> <li> <p>находить «скелетов в шкафу» и сражаться с ними;</p> </li> <li> <p>будете работать с профессионалами, которые построили в России значимые продукты;</p> </li> <li> <p>порой решать скучные и непонятные задачи — мы не скрываем что они у нас есть;</p> </li> <li> <p>работать в команде, думать едино с командой, соблюдать регламенты, проводить code-review.</p> </li> </ul> <p><strong>У нас:</strong></p> <ul> <li> <p>Уютный офис в стиле лофт в пешей доступности от метро Тульская или начало рабочего дня с 9 до 11, по желанию возможен удаленный формат работы;</p> </li> <li> <p>Добрый современный коллектив разной прокаченности готов научить или научиться у тебя новому, а также поиграть в кикер или пинг-понг по вечерам;</p> </li> <li> <p>Сформированная корпоративная культура, конференции, проекты разного уровня от простых микросервисов до highload, BigData и ИИ, современный стек и уникальный опыт — все это мы готовы дать тебе;</p> </li> <li> <p>Сгонять командой на Бали - это наша история</p> </li> </ul>', branded_description=None, key_skills=[KeySkillHHSchema(name='HTML'), KeySkillHHSchema(name='JavaScript'), KeySkillHHSchema(name='CSS'), KeySkillHHSchema(name='CSS3'), KeySkillHHSchema(name='Vue.js'), KeySkillHHSchema(name='SOLID')], schedule=IdNameHHSchema(id='fullDay', name='Полный день'), accept_handicapped=False, accept_kids=False, experience=IdNameHHSchema(id='between3And6', name='От 3 до 6 лет'), code=None, employment=IdNameHHSchema(id='full', name='Полная занятость'), created_at=datetime.datetime(2022, 3, 12, 11, 31, 30, tzinfo=datetime.timezone(datetime.timedelta(seconds=10800))), test=None, specializations=[SpecializationHHSchema(id='1.221', name='Программирование, Разработка', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.50', name='Системы управления предприятием (ERP)', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.82', name='Инженер', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.9', name='Web инженер', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком'), SpecializationHHSchema(id='1.10', name='Web мастер', profarea_id='1', profarea_name='Информационные технологии, интернет, телеком')], contacts=ContactsHHSchema(name='Мария Макарова', email=None, phones=[PhoneHHSchema(country='7', city='951', number='6425944', comment=None)]), billing_type=IdNameHHSchema(id='standard_plus', name='Стандарт плюс'), allow_messages=True, driver_license_types=[], accept_incomplete_resumes=False, professional_roles=[IdNameHHSchema(id='96', name='Программист, разработчик')], suitable_resumes_url=None, negotiations_url=None, quick_responses_allowed=False, hidden=False, vacancy_constructor_template=None)]


@pytest.fixture
def hh_search_params_schema():
    return VacancySearchParamsHHSchema(
        text="python",
        search_field=["description", "name"],
        date_from=date(2022, 1, 2),
        no_magic=True,
        only_with_salary=True,
        currency="RUR",
        salary=100000
    )


@pytest.mark.dependency()
def test_search_params_schema(hh_search_params_schema):
    assert hh_search_params_schema.get_params() == "?text=python&search_field=description&search_field=name&currency=RUR&salary=100000&only_with_salary=True&date_from=2022-01-02&no_magic=True"


@pytest.mark.skipif(condition=conf.test_offline, reason="offline mode")
def test_hh_me(hh_config):
    me = hh.get_hh_me(conf=hh_config)
    assert me.is_application == True


@pytest.mark.skipif(condition=conf.test_offline, reason="offline mode")
def test_get_vacancy(hh_config):
    vacancy_id = "52276391"
    vacancy = hh.get_hh_vacancy(vacancy_id=vacancy_id, conf=hh_config)
    assert vacancy.id == vacancy_id


@pytest.mark.skipif(condition=conf.test_offline, reason="offline mode")
@pytest.mark.dependency(depends=['test_search_params_schema'])
def test_get_vacancy_list(hh_headers, hh_search_params_schema):
    # TODO: get_vacancy_list
    params_str = hh_search_params_schema.get_params()
    response = requests.get(f"{base_url}/vacancies{params_str}", headers=hh_headers)
    assert response.status_code == 200
    json_dict = response.json()
    assert ShortVacancyListHHSchema.parse_obj(json_dict)


@pytest.mark.skipif(condition=conf.test_offline, reason="offline mode")
def test_get_similar_vacancies(hh_headers):
    # TODO: get_similar_vacancies
    vacancy_id = 51204657
    response = requests.get(f"{base_url}/vacancies/{vacancy_id}/similar_vacancies", headers=hh_headers)
    assert response.status_code == 200
    json_dict = response.json()
    assert ShortVacancyListHHSchema.parse_obj(json_dict)


@pytest.mark.skipif(condition=conf.test_offline, reason="offline mode")
def test_get_employer_list(hh_headers):
    # TODO: get_employer_list
    response = requests.get(f"{base_url}/employers?per_page=100", headers=hh_headers)
    assert response.status_code == 200
    json_dict = response.json()
    assert ShortEmployerListHHSchema.parse_obj(json_dict)


@pytest.mark.skipif(condition=conf.test_offline, reason="offline mode")
def test_get_employer(hh_headers):
    # TODO: get_employer
    employer_id = 36227
    response = requests.get(f"{base_url}/employers/{employer_id}", headers=hh_headers)
    assert response.status_code == 200
    json_dict = response.json()
    assert EmployerHHSchema.parse_obj(json_dict)
